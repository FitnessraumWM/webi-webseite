<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Verein Weberm√ºhle ‚Äì Klosterr√ºti</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background: #fff;
      color: #222;
      scroll-behavior: smooth;
    }
    header {
      background: url('webermuehle-gesamt.jpg') center/cover no-repeat;
      min-height: 92vh;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      position: relative;
      text-align: center;
    }
    .logos-left, .logos-right {
      position: absolute;
      top: 22px;
      height: 138px;
      z-index: 5;
    }
    .logos-left { left: 24px; }
    .logos-right { right: 24px; }
    .logos-left img, .logos-right img { height: 100%; }

    /* Banner ganz oben, immer klein */
    .sommerfest-timer-container {
      position: absolute;
      left: 22vw;
      top: 19vh;
      transform: rotate(-10deg);
      z-index: 7;
      background: rgba(32,32,32,0.78);
      border-radius: 1em;
      box-shadow: 0 0 14px #0007;
      padding: 0.37em 2.2em 0.30em 2.2em;
      max-width: 44vw;
      min-width: 170px;
      pointer-events: none;
      text-align: center;
    }
    .sommerfest-label {
      color: #ffe066;
      font-size: 1.04em;
      font-weight: bold;
      letter-spacing: 0.03em;
      text-shadow: 1px 2px 6px #000d;
      margin-bottom: 0.12em;
    }
    .sommerfest-label .emoji { font-size: 1.18em; vertical-align: middle; }
    .sommerfest-countdown {
      color: #fff;
      font-size: 1.04em;
      font-family: 'Consolas', 'Courier New', monospace;
      font-weight: 800;
      text-shadow: 1px 2px 8px #000b, 0 0 1em #ffb40344;
      letter-spacing: 0.03em;
      margin-top: 0.1em;
    }

    @media (max-width: 900px) {
      .sommerfest-timer-container {
        left: 8vw;
        top: 14vh;
        padding: 0.24em 0.9em;
        max-width: 80vw;
        font-size: 0.9em;
      }
    }
    @media (max-width: 650px) {
      .logos-left, .logos-right { height: 65px; top: 8px; }
      .sommerfest-timer-container {
        left: 3vw;
        top: 9vw;
        max-width: 92vw;
        font-size: 0.70em;
        padding: 0.13em 0.48em;
      }
      .gallery { grid-template-columns: 1fr; }
    }

    nav {
      position: sticky; top: 0;
      background: #2d2d2d;
      color: white;
      display: flex;
      justify-content: center;
      gap: 2em;
      font-size: 1.2em;
      font-weight: bold;
      padding: 0.5em 1em 0.5em 1em;
      z-index: 10;
      transition: top 0.7s cubic-bezier(.77,0,.18,1.05);
    }
    nav a {
      color: white;
      text-decoration: none;
      transition: color 0.2s;
      border-radius: 3px;
      padding: 0 0.2em;
    }
    nav a:hover {
      color: #ffe066;
      text-decoration: underline;
    }
    nav button#themeSwitcher {
      background: none;
      border: none;
      color: #fff;
      font-size: 1.1em;
      cursor: pointer;
      margin-left: 0.4em;
      border-radius: 6px;
      padding: 0.1em 0.2em;
      transition: background 0.22s, color 0.22s;
    }
    nav button#themeSwitcher:hover { background: #444; color: #ffd700; }

    /* Willkommens-Text gro√ü darunter */
    .welcome-headline {
      width: 100vw;
      text-align: center;
      margin-top: 38vh;
      font-size: 2.8rem;
      font-weight: 900;
      letter-spacing: 0.03em;
      color: #fff;
      text-shadow: 2px 2px 8px #000b;
      pointer-events: none;
      z-index: 2;
      position: absolute;
      left: 0;
    }
    @media (max-width: 700px) {
      .welcome-headline { font-size: 1.7rem; margin-top: 28vh; }
    }

    section {
      padding: 3em 1em 1.2em 1em;
      max-width: 1000px;
      margin: auto;
      background: #fff;
      color: #222;
    }
    h2 {
      border-bottom: 2px solid #d4d4d4;
      padding-bottom: 0.38em;
      margin-top: 0;
    }
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 1em;
      margin-top: 1em;
    }
    .gallery img {
      width: 100%;
      aspect-ratio: 1/1;
      object-fit: cover;
      border-radius: 8px;
      box-shadow: 0 0 6px #aaa3;
      cursor: zoom-in;
      transition: box-shadow 0.2s, transform 0.23s cubic-bezier(.22,1,.36,1.07);
    }
    .gallery img:hover {
      box-shadow: 0 0 18px #444b;
      transform: scale(1.05);
    }
    .spielgruppe-logo {
      margin-bottom: 0.5em;
    }
    .spielgruppe-logo img {
      height: 85px;
      width: auto;
      margin-bottom: 0.5em;
      margin-top: 0.2em;
    }
    .contact-link {
      color: inherit !important;
      text-decoration: underline dotted #aaa;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.2s;
    }
    .contact-link:hover, .contact-link:focus {
      color: #888;
      text-decoration: underline solid #888;
    }
    footer {
      background: #f2f2f2;
      padding: 2em 1em 1.3em 1em;
      text-align: center;
      font-size: 1em;
      color: #333;
    }

    /* Modal f√ºr Bildvorschau */
    #modalOverlay {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.89);
      align-items: center;
      justify-content: center;
    }
    #modalOverlay.active { display: flex; }
    #modalOverlay img {
      max-width: 90vw;
      max-height: 85vh;
      border-radius: 12px;
      background: #fff;
      object-fit: contain;
      transform: scale(0.7);
      opacity: 0;
      transition: transform 0.22s cubic-bezier(.22,1,.36,1.07), opacity 0.16s;
    }
    #modalOverlay.active img {
      transform: scale(1.0);
      opacity: 1;
    }
    #modalOverlay .closeModal {
      position: absolute;
      top: 30px; right: 45px;
      font-size: 3rem;
      color: #fff;
      cursor: pointer;
      font-family: Arial, sans-serif;
      z-index: 10;
      user-select: none;
    }

    /* Darkmode */
    body.dark {
      background: #16191c;
      color: #ddd;
    }
    body.dark section, body.dark footer {
      background: #222;
      color: #ddd;
    }
    body.dark nav { background: #232323; color: #eee; }
    body.dark nav a { color: #eee; }
    body.dark nav a:hover { color: #ffe066; }
    body.dark .sommerfest-timer-container { background: rgba(15,15,15,0.94); }
    body.dark .sommerfest-label { color: #ffe066; }
    body.dark footer { color: #bbb; }
  </style>
</head>
<body>

  <header>
    <a href="#" class="logos-left"><img src="verein-sofe-logo-w.png" alt="Logo SOFE Webi" /></a>
    <a href="#" class="logos-right"><img src="logo-qv-weiss.png" alt="Logo Quartierverein" /></a>
    <!-- Banner nur 1x -->
    <div class="sommerfest-timer-container">
      <span class="sommerfest-label">‚òÄÔ∏è n√§chstes <b>SOMMERFEST</b> in <span class="emoji">ü•≥</span></span>
      <span class="sommerfest-countdown" id="sommerfest-countdown">00 Tage 00:00:00</span>
    </div>
    <div class="welcome-headline">Willkommen in der Weberm√ºhle</div>
  </header>

  <nav>
    <a href="#historie">Historie</a>
    <a href="#partyraum">Partyraum</a>
    <a href="#rooftop">Rooftop</a>
    <a href="#fitness">Fitnessraum</a>
    <a href="#spielgruppe">Spielgruppe</a>
    <a href="#vereine">Vereine</a>
    <a href="#sommerfest">Sommerfest</a>
    <a href="#kontakt">Kontakt</a>
    <a href="#login">Login</a>
    <button id="themeSwitcher" aria-label="Theme wechseln">üåì</button>
  </nav>

  <!-- ... alle deine Sections wie gehabt ... -->
  <!-- (aus Platzgr√ºnden hier ausgelassen ‚Äì du kannst sie 1:1 von deinem Code √ºbernehmen!) -->
  
  <!-- Modal f√ºr Bildvorschau -->
  <div id="modalOverlay">
    <span class="closeModal" title="Schlie√üen">&times;</span>
    <img src="" alt="Vorschau" />
  </div>
  <footer>
    <div id="besucherinfo">Seitenbesuche: ...</div>
    &copy; 2025 Verein Weberm√ºhle &middot; Alle Rechte vorbehalten
  </footer>
  <!-- Scripte -->
  <script>
    // Men√º Hide on Scroll
    let lastScrollY = window.scrollY;
    let nav = document.querySelector('nav');
    let navHidden = false, navHeight = nav.offsetHeight;
    window.addEventListener('scroll', () => {
      if (window.scrollY > lastScrollY && window.scrollY > navHeight) {
        if (!navHidden) { nav.style.top = `-${navHeight+30}px`; navHidden = true; }
      } else {
        if (navHidden) { nav.style.top = '0'; navHidden = false; }
      }
      lastScrollY = window.scrollY;
    });

    // Theme Switcher inkl. Logo-Wechsel
    const themeBtn = document.getElementById('themeSwitcher');
    const body = document.body;
    const logos = {
      sofe: { hell: "verein-sofe-logo-w.png", dunkel: "verein-sofe-logo-s.png" },
      qv: { hell: "logo-qv-weiss.png", dunkel: "logo-qv-schwarz.png" }
    };
    function setTheme(mode) {
      if (mode === 'dark') {
        body.classList.add('dark');
        document.querySelector('.logos-left img').src = logos.sofe.dunkel;
        document.querySelector('.logos-right img').src = logos.qv.dunkel;
        localStorage.setItem('theme', 'dark');
        themeBtn.textContent = "üåû";
      } else {
        body.classList.remove('dark');
        document.querySelector('.logos-left img').src = logos.sofe.hell;
        document.querySelector('.logos-right img').src = logos.qv.hell;
        localStorage.setItem('theme', 'light');
        themeBtn.textContent = "üåô";
      }
    }
    themeBtn.onclick = () => setTheme(body.classList.contains('dark') ? 'light' : 'dark');
    (function() {
      const theme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      setTheme(theme);
    })();

    // Modale Bildvorschau
    document.querySelectorAll('.gallery img').forEach(img => {
      img.addEventListener('click', () => {
        const modal = document.getElementById('modalOverlay');
        const modalImg = modal.querySelector('img');
        modalImg.src = img.src; modalImg.alt = img.alt;
        modalImg.style.transform = 'scale(0.7)';
        modalImg.style.opacity = '0';
        modal.classList.add('active');
        setTimeout(() => {
          modalImg.style.transform = 'scale(1.0)';
          modalImg.style.opacity = '1';
        }, 10);
      });
    });
    document.querySelector('#modalOverlay .closeModal').onclick = closeModal;
    document.getElementById('modalOverlay').onclick = function(e) { if (e.target === this) closeModal(); };
    document.addEventListener('keydown', function(e) { if (e.key === "Escape") closeModal(); });
    function closeModal() {
      const modal = document.getElementById('modalOverlay');
      const modalImg = modal.querySelector('img');
      modalImg.style.transform = 'scale(0.7)';
      modalImg.style.opacity = '0';
      setTimeout(() => { modal.classList.remove('active'); modalImg.src = ''; }, 180);
    }

    // Sommerfest-Countdown
    function updateSommerfestCountdown() {
      const target = new Date(2025, 7, 30, 14, 0, 0);
      const now = new Date();
      let diff = target - now;
      if (diff < 0) {
        document.getElementById('sommerfest-countdown').innerText = "Das Sommerfest l√§uft!";
        return;
      }
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      diff -= days * 1000 * 60 * 60 * 24;
      const hours = Math.floor(diff / (1000 * 60 * 60));
      diff -= hours * 1000 * 60 * 60;
      const mins = Math.floor(diff / (1000 * 60));
      diff -= mins * 1000 * 60;
      const secs = Math.floor(diff / 1000);
      document.getElementById('sommerfest-countdown').innerText =
        days.toString().padStart(2, '0') + " Tage " +
        hours.toString().padStart(2, '0') + ":" +
        mins.toString().padStart(2, '0') + ":" +
        secs.toString().padStart(2, '0');
    }
    updateSommerfestCountdown();
    setInterval(updateSommerfestCountdown, 1000);

    // Besucherz√§hler counterapi.dev
    async function updateCounterInfo() {
      const res = await fetch("https://api.counterapi.dev/v1/webi-webermuehle/visits");
      const data = await res.json();
      let text = "Seitenbesuche gesamt: " + data.count;
      const [today, week, month] = await Promise.all([
        fetch("https://api.counterapi.dev/v1/webi-webermuehle-today/visits").then(r => r.json()),
        fetch("https://api.counterapi.dev/v1/webi-webermuehle-week/visits").then(r => r.json()),
        fetch("https://api.counterapi.dev/v1/webi-webermuehle-month/visits").then(r => r.json())
      ]);
      text += "<br>Heute: " + today.count +
              "<br>Diese Woche: " + week.count +
              "<br>Diesen Monat: " + month.count;
      document.getElementById("besucherinfo").innerHTML = text;
    }
    fetch("https://api.counterapi.dev/v1/webi-webermuehle/visits/incr");
    fetch("https://api.counterapi.dev/v1/webi-webermuehle-today/visits/incr");
    fetch("https://api.counterapi.dev/v1/webi-webermuehle-week/visits/incr");
    fetch("https://api.counterapi.dev/v1/webi-webermuehle-month/visits/incr");
    updateCounterInfo();
  </script>
</body>
</html>
